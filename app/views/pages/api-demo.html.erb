<div class="row">
  <div class="col-md-12">
    <div id="main" data-token="temp">
      <h4 class="page-heading ">ArtX RESTful Web API Examples</h4>

      <div class="panel panel-default">
        <div class="panel-heading">Log in</div>
        <div class="panel-body">
          Email: <input type="text" name="email" id="email" value="" class="form-control" /><br>
          Password: <input type="password" name="password" id="password" value="" class="form-control" /><br>
          <button value="Log in" id='login-button' class="btn btn-default" />Log in</button><br>
          <div class="well" id="token-viewer"></div>
          <pre class="prettyprint lang-js">
            <code class="javascript">
  $.ajax({
    type: "POST",
    dataType: "json",
    url: "/tokens",
    data: {
      email: $("#email").val(),
      password:  $("#password").val()
    },
    success: function( data ){
      $.cookie('token', data.authentication_token);
    }
  });
            </code>
          </pre>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">Get Favorites</div>
        <div class="panel-body">
        <button value="Get Favorites" id='faves-button' class="btn btn-default" />Get Favorites</button><br>
        <ul id="favorites" class="list-group"></ul>
          <pre class="prettyprint lang-js">
            <code class="javascript">
  $.ajax({
    type: "GET",
    dataType: "json",
    url: "/favorites",
    data: {
      authentication_token: $.cookie('token')
    },
    success: function( data ) {
      $('#favorites').empty();
      $.each(data.favorites, function (key, value) {
        $('#favorites').append('&lt;li class="list-group-item"&gt;' + value.event.name+ '&lt;/li&gt;')
        console.log(value.event);
      });
    }
  });
           </code>
          </pre>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">Get Events by Location</div>
        <div class="panel-body">
          <button value="Get Events by Location" id='events-location-button' class="btn btn-default" />Get Events by Location</button><br>
          <ul id="events-by-location" class="list-group"></ul>
          <pre class="prettyprint lang-js">
            <code class="javascript">
  $.ajax({
    type: "GET",
    dataType: "json",
    url: "/locations/1/events",
    data: { },
    success: function( data ){
      console.log(data);
      $('#events-by-location').empty();
      $.each(data.events, function (key, value) {
        $('#events-by-location').append('&lt;li class="list-group-item"&gt;' + value.name+ '&lt;/li&gt;')
        console.log(value.name);
      });
    }
  });
           </code>
          </pre>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">Get Events by Month</div>
        <div class="panel-body">
          <button value="Get Events by Month" id='events-month-button' class="btn btn-default" />Get Events by Month</button><br>
          <ul id="events-by-month" class="list-group"></ul>
          <pre class="prettyprint lang-js">
            <code class="javascript">
  $.ajax({
    type: "GET",
    url: "/events",
    data: {
      year: '2014',
      month: '08',
    },
    success: function( data ){
      console.log(data);
      $('#events-by-month').empty();
      $.each(data.events, function (key, value) {
        $('#events-by-month').append('&lt;li class="list-group-item"&gt;' + value.name+ '&lt;/li&gt;')
        console.log(value.name);
      });
    }
  });
           </code>
          </pre>
        </div>
      </div>

     </div>

      <!--
      <div>
      <button value="Get Interests" id='interests-button' class="btn btn-default" />Get interests</button><br>
      <ul id="interests" class="list-group"></ul>
      </div>


      <div>
      <button value="Get Attendances" id='attendances-button' class="btn btn-default" />Get attendances</button><br>
      <ul id="attendances" class="list-group"></ul>
      </div>
       -->
    </div>
  </div>
</div>
<script type="text/javascript">
  $(document).ready(function(){
    $('#login-button').click(function(){
      $.ajax({
        type: "POST",
        dataType: "json",
        url: "/tokens",
        data: {
          email: $("#email").val(),
          password:  $("#password").val()
        },
        success: function( data ){
          console.log(data);
          $.cookie('token', data.authentication_token);
          $('div#main').data("token", $.cookie('token'));
          $('div#token-viewer').html("Authentication Token: " + $.cookie('token'));
          console.log($('div#main').data("token"));
        }
      });
    });
    $('#faves-button').click(function(){
      $.ajax({
        type: "GET",
        dataType: "json",
        url: "/favorites",
        data: {
          authentication_token: $.cookie('token')
        },
        success: function( data ) {
          $('#favorites').empty();
          $.each(data.favorites, function (key, value) {
            $('#favorites').append('<li class="list-group-item">' + value.event.name+ '</li>')
            console.log(value.event);
          });
        }
      });
    });
    $('#events-location-button').click(function(){
      $.ajax({
        type: "GET",
        dataType: "json",
        url: "/locations/1/events",
        data: { },
        success: function( data ){
          console.log(data);
          $('#events-by-location').empty();
          $.each(data.events, function (key, value) {
            $('#events-by-location').append('<li class="list-group-item">' + value.name+ '</li>')
            console.log(value.name);
          });
        }
      });
    });
    $('#events-month-button').click(function(){
      $.ajax({
        type: "GET",
        url: "/events",
        data: {
          year: '2014',
          month: '08',
        },
        success: function( data ){
          console.log(data);
          $('#events-by-month').empty();
          $.each(data.events, function (key, value) {
            $('#events-by-month').append('<li class="list-group-item">' + value.name+ '</li>')
            console.log(value.name);
          });
        }
      });
    });
    // $('#interests-button').click(function(){
    //   $.ajax({
    //     type: "GET",
    //     dataType: "json",
    //     url: "/interests",
    //     data: {
    //     },
    //     success: function( data ){
    //     }
    //   });
    // });
    // $('#attendances-button').click(function(){
    //   $.ajax({
    //     type: "GET",
    //     dataType: "json",
    //     url: "/attendances",
    //     data: {
    //     },
    //     success: function( data ){
    //     }
    //   });
    // });
  });
</script>
