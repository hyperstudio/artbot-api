<body data-token="temp">
<p>Some examples of interactions with our Rails JSON API.</p>

<div>
Email: <input type="text" name="email" id="email" value="" class="form-control" /><br>
Password: <input type="password" name="password" id="password" value="" class="form-control" /><br>
<button value="Log in" id='login-button' class="btn btn-default" />Log in</button>
</div>

<div>
<button value="Get Faves" id='faves-button' class="btn btn-default" />Get Faves</button><br>
<ul id="favorites" class="list-group"></ul>
</div>

<div>
<button value="Get Interests" id='interests-button' class="btn btn-default" />Get interests</button><br>
<ul id="interests" class="list-group"></ul>
</div>


<div>
<button value="Get Attendances" id='attendances-button' class="btn btn-default" />Get attendances</button><br>
<ul id="attendances" class="list-group"></ul>
</div>

<div>
<button value="Get Events by Location" id='events-location-button' class="btn btn-default" />Get Events by Location</button><br>
<ul id="events-by-location" class="list-group"></ul>
</div>


<div>
<button value="Get Events by Month" id='events-month-button' class="btn btn-default" />Get Events by Month</button><br>
<ul id="events-by-month" class="list-group"></ul>
</div>

<script type="text/javascript">
  $(document).ready(function(){
    $('#login-button').click(function(){
      $.ajax({
        type: "POST",
        dataType: "json",
        url: "/tokens",
        data: {
          email: $("#email").val(),
          password:  $("#password").val()
        },
        success: function( data ){
          console.log(data);
          $.cookie('token', data.authentication_token);
          $('body').data("token", $.cookie('token'));
          console.log($('body').data("token"));
        }
      });
    });
    $('#faves-button').click(function(){
      $.ajax({
        type: "GET",
        dataType: "json",
        url: "/favorites",
        data: {
          authentication_token: $.cookie('token')
        },
        success: function( data ) {
          $.each(data.favorites, function (key, value) {
            $('#favorites').append('<li class="list-group-item">' + value.event.name+ '</li>')
            console.log(value.event);
          });
        }
      });
    });
    $('#interests-button').click(function(){
      $.ajax({
        type: "GET",
        dataType: "json",
        url: "/interests",
        data: {
        },
        success: function( data ){
        }
      });
    });
    $('#attendances-button').click(function(){
      $.ajax({
        type: "GET",
        dataType: "json",
        url: "/attendances",
        data: {
        },
        success: function( data ){
        }
      });
    });
    $('#events-locations-button').click(function(){
      $.ajax({
        type: "GET",
        dataType: "json",
        url: "/locations/1/events",
        data: { },
        success: function( data ){
        }
      });
    });
    $('#events-month-button').click(function(){
      $.ajax({
        type: "GET",
        url: "/events",
        data: {
          year: '2014',
          month: '08',
        },
        success: function( data ){
          console.log(data);
          $.each(data.events, function (key, value) {
            $('#events-by-month').append('<li class="list-group-item">' + value.name+ '</li>')
            console.log(value.event);
          });
        }
      });
    });
  });
</script>
<%= javascript_include_tag "jquery.cookie" %>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
</body>
<style type="text/css">
body {
  margin: 10px;
  padding: 10px;
}
div {
  padding:10px;
}
</style>
